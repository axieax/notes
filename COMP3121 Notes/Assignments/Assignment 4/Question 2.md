# COMP3121 Assignment 4 Question 2

Andrew Xie, z5317337

**You have $n$ warehouses and $n$ shops. At each warehouse, a truck is loaded with enough goods to supply one shop. There are $m$ roads, each going from a warehouse to a shop, and driving along the $i$th road takes $d_i$ hours, where $d_i$​ is an integer. Design a polynomial time algorithm to send the trucks to the shops, minimising the time until all shops are supplied.**

Since roads go from $n$​​ warehouses to $n$​​ shops, this relationship can be modelled using a bipartite directed graph, with edges representing $m$​​ roads going from the set of warehouse vertices to the set of shop vertices. We can extend this graph as a flow network, defining a super source node with outgoing edges connected to all warehouses (sources), as well as a super sink node with incoming edges connected from all shops (sinks). Setting the capacity of all incoming edges to the super sink as 1, we can check that all shops have been supplied if the maximum flow from the network is $n$​​. Since all integers $d_i$​​​ are positive integers, this capacity of 1 becomes a bottleneck for all augmented paths in the network, so we can similarly set all edges to have a capacity of 1. The Ford-Fulkerson method can be used to find the maximum flow in the network in $O(|E|\cdot f^*)$ where $f^*$ is the maximum flow of the network ($n$), which can be simplified to $O((2n+m) \cdot n) = O(n^2 + nm)$ time. 

The Ford-Fulkerson or Edmonds-Karp algorithm can be used to find the maximum flow in the network in $O(|V||E|^2) = O((2n+2)\cdot(2n+m)^2) = O(n(n+m)^2)$​​ time. Assuming all trucks leave the warehouses at the same time, minimising the time until all shops are supplied is equivalent to minimising the longest drive time $d_i$​​. We can sort $d_i$​​ such that it forms an increasing sequence using merge sort in $O(m\log m)$​​ time, and use binary search to select an upper bound $d_i$​​ for the roads to be included in the flow network, in $O(\log m)$​​​ time. With a fixed upper bound $d_i$​ selected using binary search, the maximum flow subproblem can be run on a flow network which only includes roads that do not take longer than $d_i$​​ to drive along. This step has a running time of $O(n(n+m)^2\log m )$​. The solution to the problem is thus the smallest $d_i$​ which has a maximum flow of $n$​​ for its subproblem, indicating that all shops can be supplied with roads that take $\leq d_i$​​​ hours to drive along. This algorithm has a final worst-case time complexity of $O(m\log m + n\log m \cdot (n+m)^2) = O(n (n+m)^2 \log m)$​​​​. 

