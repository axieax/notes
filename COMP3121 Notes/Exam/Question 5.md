# Question 5

**Use a max flow algorithm to solve the following problem. Elbonia is grappling with a COVID outbreak. It has N affected cities 1,…,N. City i has p(i) many patients who require an intensive care bed. Hospitals in a city i have b(i) many available intensive care beds in total. Transportation of patients living in a city i to a hospital in a city j where they will be treated is possible only if the city j is within K kilometers (by road) from city i. You are given the above numbers and a map of Elbonia with road distances and have to design an algorithm which assigns each patient from every city i to a sufficiently close city j which has a hospital where that patient can be treated.  Your algorithm should make sure that no city i has to accommodate more patients than its total intensive care unit capacity b(i). It should also output a message “impossible” if there is no such assignment.  In particular:**
**(a) describe what the vertices of the flow graph are;**
**(b) describe what the edges of the flow graph are;**
**(c) describe how the capacities of all edges are assigned;**
**(d) after applying a max flow algorithm describe how the patients are assigned to cities where they will be treated;**
**(e) describe how it is determined that the problem has no solution meeting the constraints given.** 
**Note: p(i) can be larger or smaller or equal to b(i); also a patient from a city c(i) does NOT have to be treated in a hospital in the same city.**

This problem is a maximum bipartite matching problem, where we want to maximise the "flow" of patients from cities to hospital beds. We can use a flow network to model the problem, where edges can be defined from a super source to the cities as sources, from the cities to the hospital beds as sinks, and finally from the beds to a super sink. The first set of edges from the super source $s$ to the cities $i$ represents the number of patients requiring an intensive care bed, where each $edge(s,i)$ has a capacity of $p(i)$. The next set of edges from the cities $i$ to the hospitals $j$ represents the distance between them. These edges have weighted capacities corresponding to the distances between cities and hospitals, where only distances less than $K$ kilometers are included, since patients can only be treated by hospitals within this distance. Edges from hospitals to the super sink have a capacity corresponding to the hospital's limit for available intensive care beds $b(i)$​​​. The maximum flow of the network which reaches the super sink represents the maximum number of patients who can be treated in such a system. This can be found using the Edmonds-Karp algorithm in $O(|V||E|^2)$ time, or $O(N \cdot (N^2)^2) = O(N^5)$​ time. Patients should be assigned to cities according to the final residual network from the Edmonds-Karp algorithm with the maximum flow. If the maximum flow is not equal to the initial sum of all $p(i)$​ representing the number of patients requiring intensive care, then this means that not all cities can accomodate all patients, so no solution is found. 

